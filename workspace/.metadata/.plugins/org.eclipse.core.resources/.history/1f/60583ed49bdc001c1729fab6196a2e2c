package com.pcwk.ehr;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

import org.apache.logging.log4j.LogManager;

import org.apache.logging.log4j.Logger;

public class UserDao {
	final Logger LOG = LogManager.getLogger(this.getClass());
	
	final String DB_DRIVER = "oracle.jdbc.driver.OracleDriver";
	final String DB_URL = "jdbc:oracle:thin:@192.168.3.101:1521:xe";
	final String USER_ID = "SPRING";
	final String USER_PASS = "pcwk_spring";
	/**
	 * 사용자 등록
	 * @param inVO
	 * @return 1(성공)/0(실패)
	 * @throws ClassCastException
	 * @throws SQLException
	 * @throws ClassNotFoundException 
	 */
	
	public int add(UserVO inVO)throws SQLException, ClassNotFoundException{
		int flag = 0;
		// 1. db연결
		// 2. sql Statement(X), PreparedStatement
		// 3. PreparedStatement 수행
		// 4. ResultSet으로 정보를 받아와 처리
		// 5. 자원반납
		
		// 1. 
		Connection connection = null;
		Class.forName(DB_DRIVER);
		
		connection = DriverManager.getConnection(DB_URL, USER_ID, USER_PASS);
		LOG.debug("=================================================");
		LOG.debug("=connection="+connection);
		LOG.debug("=================================================");
		
		// 2. 
		StringBuilder sb = new StringBuilder(100);
		sb.append("INSERT INTO hr_member ( \n");
		sb.append("	    u_id,              \n");
		sb.append("	    name,              \n");
		sb.append("	    passwd             \n");
		sb.append("	) VALUES (             \n");
		sb.append("	    ?,                 \n");
		sb.append("	    ?,                 \n");
		sb.append("	    ?                  \n");
		sb.append("	)                      \n");
		
		LOG.debug("==============================");
		LOG.debug("param:"+inVO.toString());
		LOG.debug("sql:\n"+sb.toString());
		LOG.debug("==============================");

		// 5.
		connection.close();
		return flag;
		
	}
}
